# 요구사항 명세서

- 개발 환경
- Python 3.9.x
- Front-end : Vue 2, Vuex, Vue router
- Back-end : Django 3.2.x, Django REST framework
- DB : sqlite 3
- 개발 도구 : Git, VScode, npm, Postman

## Commit 규칙
- 참고 :  https://dejavuhyo.github.io/posts/patterns-for-writing-better-git-commit-messages/

```
01 [type](optional scope): [subject]

02 [optional body]

- 예시 -
Feat(Create): Add Create method in vue
vue에 게시글 작성 기능에 해당하는 Create라는 이름의 함수 기능 구현
```

1. type(타입)
   
|타입|설명|
|----|----------|
|create|새로운 폴더나 파일 생성|
|feat|새로운 기능 추가|
|fix|버그 수정|
|docs|문서 수정|
|style|코드 formatting, 세미콜론(;) 누락, 코드 변경이 없는 경우|
|refactor|코드 리팩터링|
|test|테스트 코드, 리팩터링 테스트 코드 추가(프로덕션 코드 변경 X)|
|design|CSS 등 사용자 UI 디자인 변경|
|build|관련 변경 사항 빌드|
|omment|필요한 주석 추가 및 변경|
|revert|되돌리기|
|rename|파일 혹은 폴더명을 수정하거나 옮기는 작업만인 경우|
|remove|파일을 삭제하는 작업만 수행한 경우|
|!BREAKING CHANGE|커다란 API 변경의 경우|
|!HOTFIX|급하게 치명적인 버그를 고쳐야 하는 경우|

2. scope
- 선택사항이며, 변경된 부분을 직접적으로 표기한다.
- 함수가 변경되었으면 함수명, 메소드가 추가되었으면 클래스 명을 입력한다.

3. subject
- 첫 글자는 대문자로 입력한다.
- 마지막에는 .(period)을 찍지 않으며 영문 기준 최대 50자를 넘지 않는다.
- 제목은 명령문의 형태로 작성한다. (동사원형 사용)
  
4. body
- 각 줄은 최대 72자를 넘지 않도록 한다.
- 어떻게 변경했는지보다, 무엇을 변경했고, 왜 변경했는지를 설명한다.


### 1. 영화 리뷰
  - 사용자가 영화 상세 페이지의 리뷰란에서 영화에 대한 평론 / 리뷰를 남길 수 있도록 구현
  - 리뷰란은 크게 두 섹션으로 구성, 평론가 리뷰 란과 사용자 리뷰 란
  - 평론가 리뷰 란에는 좋아요 기능만 구현, 댓글은 달지 못하도록 설정
  - 평론가 리뷰는 호감순(좋아요가 높은 순) / 이름순 선택이 가능하며, 선택에 맞게 리뷰가 노출 
  - 사용자 리뷰 란에는 좋아요와 댓글 기능 구현, 댓글을 대댓글까지만 가능하도록 설정(깊이 : 1차)
  - 사용자 리뷰는 호감순(좋아요가 높은 순) / 최신순 선택이 가능하며, 선택에 맞게 리뷰가 노출
  - 영화 / 리뷰에 싫어요 기능 구현, 영화에 싫어요 기능 구현 시, 유저의 싫어하는 장르에 해당 영화 장르를 포함 -> 선택 사항
  - 좋아요 와 싫어요는 하나 클릭 시 반대편은 클릭될 수 없도록 구현 -> 선택 사항


### 2. 사용자 계정 관리 기능
  - 로그인과 로그아웃, 회원가입과 회원 탈퇴 기능 구현
  - 회원정보 수정 기능 구현
  - 회원 가입 시 아이디, 비밀번호, 비밀번호 확인, 닉네임, 좋아하는 장르(선택지 버튼을 제공) 입력란이 있도록 구현
  - 개인 프로필에는 개인 프로필 사진, 닉네임 출력, 팔로우 팔로워 수(자신의 계정에서는 팔로우 버튼 안보이도록 구현), 좋아요 누른 영화 목록(영화 포스터로 출력, 영화 포스터 클릭 시 영화 상세페이지로 이동)과 영화 장르, 좋아요 누른 댓글, 남긴 리뷰(리뷰는 영화 제목까지 출력하도록 구현, 댓글이나 리뷰 클릭 시 해당 영화 상세페이지로 이동)가 보이도록 구현
  - 계정 닉네임 클릭 시 해당 유저의 프로필 란으로 이동
  - 개인 프로필에 미니홈피처럼 방문자 글 남길 수 있도록 설정, 댓글 1차까지만 가능하도록 설정 -> 선택 사항


### 3. 영화 검색 기능
  - 해당 검색어를 포함하는 이름을 가진 영화 목록을 출력(높은 유사성을 가진 제목부터 출력)
  - 해당 검색어를 장르로 갖는 영화 목록을 출력
  - 영화 배우 이름 검색 시 출연 영화 목록 출력
  - 해당 검색어를 포함하는 내용을 가진 영화 목록 -> 선택 사항
  - 검색을 했을 때 띄어쓰기를 기준으로 단어 포함 여부에 따라 검색결과 출력


### 4. 영화 추천 기능
  - 자신이 좋아하는 장르에서 무작위 / 평점순 / 인기순 / 좋아요 순 에 따라 영화 추천
  - 자신이 좋아요 누른 장르에는 가중치를 추가함
  - 추천할 영화가 좋아요 목록에 있다면 다음 영화를 추천하도록 설정 -> 선택 사항
  - 만약 추천 영화가 좋아요 목록에 있지만 좋아요를 누른지 오랜 시간이 지났다면 그대로 추천 -> 선택 사항
  - 추천 영화가 싫어요 목록에 있다면 다른 영화를 추천 -> 선택 사항
  - 날씨 api를 통해 날씨에 따른 영화 추천(날씨와 사람의 감정 혹은 영화와 사람의 감정 사이의 통계 자료나 논문을 찾았을 경우 적용)
  - 특정 기간동안 가장 많이 좋아요가 눌린 영화 추천
  - 전체 영화에서 가장 좋아요가 많은 영화 추천
  - 가장 싫어요가 많은 영화 추천 -> 선택 사항


## 프로젝트 작성 순서 초안
기본 프로젝트 구조 생성 -> 영화 전체 데이터 불러와서 화면에 띄우기 -> 게시판 기능 구현 -> 사용자 정보 관리 기능 구현(게시판 기능과 결합)
-> 영화 전체보기 페이지 구성(필터 기능 추가) -> 영화 상세 페이지 내부 구성 -> 영화 추천 알고리즘 작성 및 영화 추천 -> 영화 검색 기능 구현 -> 영화 상세페이지의 감독/배우 페이지 생성
-> 평론가 리뷰와 사용자 리뷰 크롤링 / api 사용 -> 이상형 월드컵 구현


# DB Schema 구성 및 ERD 작성

### User model
|필드명|Field Type|
|----|----------|
|id|Integer|
|password|varChar|
|last_login|datetime|
|is_superuser|boolean|
|username|varChar|
|first_name|varChar|
|last_name|varChar|
|email|varChar|
|is_staff|boolean|
|is_active|boolean|
|date_joined|datetime|
|followings|ManyToMany('self', symmetrical=False, related_name="followers")|


### Movie model
|필드명|Field Type|
|----|----------|
|id|Integer|
|title|Char|
|released_date|Date|
|poster_url|VarChar|
|overview|Text|
|vote_average|Float|
|genres|ManyToMany(Genre)|
|movie_like_users|ManyToMany(settings.AUTH_USER_MODEL, related_name="movielike")|
|movie_dislike_users|ManyToMany(settings.AUTH_USER_MODEL, related_name="moviedislike")|


### MovieLike model
|필드명|Field Type|
|----|----------|
|id|Integer|
|movie_id|BigInt|
|user_id|BigInt|


### MovieDislike model(선택)
|필드명|Field Type|
|----|----------|
|id|Integer|
|movie_id|BigInt|
|user_id|BigInt|


### Genre model(영화 장르)
|필드명|Field Type|
|----|----------|
|id|Integer|
|name|varChar|


### Comment model(평론 or 후기)
|필드명|Field Type|
|----|----------|
|id|Integer|
|content|Text|
|movie_title|ForeignKey(Movie)|
|created_at|datetime|
|updated_at|datetime|
|user_id|BigInt|
|like_users|ManyToMany(settings.AUTH_USER_MODEL, related_name="likecomment")|
|dislike_users|ManyToMany(settings.AUTH_USER_MODEL, related_name="dislikecomment")|


### Follow model(팔로우 / 팔로워)
|필드명|Field Type|
|----|----------|
|id|Integer|
|from_user_id|BigInt|
|to_user_id|BigInt|


### CommentLike model(평론 or 후기 좋아요)
|필드명|Field Type|
|----|----------|
|id|Integer|
|review_id|BigInt|
|user_id|BigInt|


### CommentDisLike model(선택)
|필드명|Field Type|
|----|----------|
|id|Integer|
|review_id|BigInt|
|user_id|BigInt|


### Review model(선택)
|필드명|Field Type|
|----|----------|
|id|Integer|
|content|Text|
|user_id|ForeignKey|
|review_id|BigInt|
|like_users|ManyToMany(settings.AUTH_USER_MODEL, related_name="likereview")|
|dislike_users|ManyToMany(settings.AUTH_USER_MODEL, related_name="dislikereview")|


### ReviewLike model(선택)
|필드명|Field Type|
|----|----------|
|id|Integer|
|review_id|BigInt|
|user_id|BigInt|


### ReviewDisLike model(선택)
|필드명|Field Type|
|----|----------|
|id|Integer|
|review_id|BigInt|
|user_id|BigInt|


# ERD 구조

![image1](/image/ERD_first_1.png)
![image2](/image/ERD_first_2.png)
![image3](/image/ERD_first_3.PNG)


# URL 구성

## backend
- movies 앱과 관련된 모든 주소는 `movies/` 로 시작
- reviews 앱과 관련된 모든 주소는 `reviews/` 로 시작
- accounts 앱과 관련된 모든 주소는 `accounts/` 로 시작

### movies
- 전체 영화 리스트를 불러오는 페이지 : 빈 URL
- 상세 영화 정보를 불러오는 페이지 : `<int:movie_pk>/`
- 추천 영화 정보를 불러오는 페이지 : `recommend/`

### reviews
- 해당 영화의 전체 리뷰를 보여주는 페이지 : `<int:movie_pk>/`
- 해당 영화의 특정 리뷰 하나를 자세히 보여주는 페이지 : `<intLmovie_pk>/<int:review_pk>/`

### accounts
- 회원가입 보여주는 페이지 : `signup/`
- 로그인 창을 보여주는 페이지 : `login/`
- 회원정보 수정 창을 보여주는 페이지 : `update/`